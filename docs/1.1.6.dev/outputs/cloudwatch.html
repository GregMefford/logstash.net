---
title: logstash docs for outputs/cloudwatch
layout: content_right
---
<h2>cloudwatch</h2>
<h3>Status: <a href="../plugin-status">experimental</a></h3>

<p>This output lets you aggregate and send metric data to AWS CloudWatch</p>

<p>Configuration is done partly in this output and partly using fields added
to your events by other input &amp; filter plugins.</p>

<p>Events which do not have a "CW<em>metric" field will be ignored, so to send
events to CloudWatch you must at least add the "CW</em>metric" field to the
desired events (using grep for example)</p>

<p>Other fields which can be added to events to modify the behavior of this
plugin are, "CW<em>namespace", "CW</em>unit", "CW<em>value", and the pair of
"CW</em>dimensionName" &amp; "CW_dimensionValue".  All of these field names are
configurable in this output.  See below for details.</p>

<p>You can read more about AWS CloudWatch here: http://aws.amazon.com/cloudwatch/</p>


<h3> Synopsis </h3>

This is what it might look like in your config file:

<pre><code>output {
  cloudwatch {
    <a href="#setting_access_key">access_key</a> => ... # string (required)
    <a href="#setting_add_field">add_field</a> => ... # hash (optional), default: {}
    <a href="#setting_add_tag">add_tag</a> => ... # array (optional), default: []
    <a href="#setting_charset">charset</a> => ... # ["ASCII-8BIT", "UTF-8", "US-ASCII", "Big5", "Big5-HKSCS", "Big5-UAO", "CP949", "Emacs-Mule", "EUC-JP", "EUC-KR", "EUC-TW", "GB18030", "GBK", "ISO-8859-1", "ISO-8859-2", "ISO-8859-3", "ISO-8859-4", "ISO-8859-5", "ISO-8859-6", "ISO-8859-7", "ISO-8859-8", "ISO-8859-9", "ISO-8859-10", "ISO-8859-11", "ISO-8859-13", "ISO-8859-14", "ISO-8859-15", "ISO-8859-16", "KOI8-R", "KOI8-U", "Shift_JIS", "UTF-16BE", "UTF-16LE", "UTF-32BE", "UTF-32LE", "Windows-1251", "BINARY", "IBM437", "CP437", "IBM737", "CP737", "IBM775", "CP775", "CP850", "IBM850", "IBM852", "CP852", "IBM855", "CP855", "IBM857", "CP857", "IBM860", "CP860", "IBM861", "CP861", "IBM862", "CP862", "IBM863", "CP863", "IBM864", "CP864", "IBM865", "CP865", "IBM866", "CP866", "IBM869", "CP869", "Windows-1258", "CP1258", "GB1988", "macCentEuro", "macCroatian", "macCyrillic", "macGreek", "macIceland", "macRoman", "macRomania", "macThai", "macTurkish", "macUkraine", "CP950", "Big5-HKSCS:2008", "CP951", "stateless-ISO-2022-JP", "eucJP", "eucJP-ms", "euc-jp-ms", "CP51932", "eucKR", "eucTW", "GB2312", "EUC-CN", "eucCN", "GB12345", "CP936", "ISO-2022-JP", "ISO2022-JP", "ISO-2022-JP-2", "ISO2022-JP2", "CP50220", "CP50221", "ISO8859-1", "Windows-1252", "CP1252", "ISO8859-2", "Windows-1250", "CP1250", "ISO8859-3", "ISO8859-4", "ISO8859-5", "ISO8859-6", "Windows-1256", "CP1256", "ISO8859-7", "Windows-1253", "CP1253", "ISO8859-8", "Windows-1255", "CP1255", "ISO8859-9", "Windows-1254", "CP1254", "ISO8859-10", "ISO8859-11", "TIS-620", "Windows-874", "CP874", "ISO8859-13", "Windows-1257", "CP1257", "ISO8859-14", "ISO8859-15", "ISO8859-16", "CP878", "Windows-31J", "CP932", "csWindows31J", "SJIS", "PCK", "MacJapanese", "MacJapan", "ASCII", "ANSI_X3.4-1968", "646", "UTF-7", "CP65000", "CP65001", "UTF8-MAC", "UTF-8-MAC", "UTF-8-HFS", "UTF-16", "UTF-32", "UCS-2BE", "UCS-4BE", "UCS-4LE", "CP1251", "UTF8-DoCoMo", "SJIS-DoCoMo", "UTF8-KDDI", "SJIS-KDDI", "ISO-2022-JP-KDDI", "stateless-ISO-2022-JP-KDDI", "UTF8-SoftBank", "SJIS-SoftBank", "locale", "external", "filesystem", "internal"] (optional), default: "UTF-8"
    <a href="#setting_debug">debug</a> => ... # boolean (optional), default: false
    <a href="#setting_dimensions">dimensions</a> => ... # hash (optional)
    <a href="#setting_exclude_tags">exclude_tags</a> => ... # array (optional), default: []
    <a href="#setting_field_dimensions">field_dimensions</a> => ... # string (optional), default: "CW_dimensions"
    <a href="#setting_field_metricname">field_metricname</a> => ... # string (optional), default: "CW_metricname"
    <a href="#setting_field_namespace">field_namespace</a> => ... # string (optional), default: "CW_namespace"
    <a href="#setting_field_unit">field_unit</a> => ... # string (optional), default: "CW_unit"
    <a href="#setting_field_value">field_value</a> => ... # string (optional), default: "CW_value"
    <a href="#setting_fields">fields</a> => ... # array (optional), default: []
    <a href="#setting_format">format</a> => ... # ["plain", "json", "json_event"] (optional)
    <a href="#setting_message_format">message_format</a> => ... # string (optional)
    <a href="#setting_metricname">metricname</a> => ... # string (optional)
    <a href="#setting_namespace">namespace</a> => ... # string (optional), default: "Logstash"
    <a href="#setting_queue_size">queue_size</a> => ... # number (optional), default: 10000
    <a href="#setting_region">region</a> => ... # string (optional), default: "us-east-1"
    <a href="#setting_remove_tag">remove_tag</a> => ... # array (optional), default: []
    <a href="#setting_secret_key">secret_key</a> => ... # string (required)
    <a href="#setting_tags">tags</a> => ... # array (optional), default: []
    <a href="#setting_timeframe">timeframe</a> => ... # string (optional), default: "1m"
    <a href="#setting_type">type</a> => ... # string (required), default: ""
    <a href="#setting_unit">unit</a> => ... # ["Seconds", "Microseconds", "Milliseconds", "Bytes", "Kilobytes", "Megabytes", "Gigabytes", "Terabytes", "Bits", "Kilobits", "Megabits", "Gigabits", "Terabits", "Percent", "Count", "Bytes/Second", "Kilobytes/Second", "Megabytes/Second", "Gigabytes/Second", "Terabytes/Second", "Bits/Second", "Kilobits/Second", "Megabits/Second", "Gigabits/Second", "Terabits/Second", "Count/Second", "None"] (optional), default: "Count"
    <a href="#setting_value">value</a> => ... # string (optional), default: "1"
  }
}
</code></pre>

<h3> Details </h3>

<h4> 
  <a name="setting_access_key">
    access_key (required setting)
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> There is no default value for this setting. </li>
</ul>

<p>The AWS Access Key ID</p>

<h4> 
  <a name="setting_add_field">
    add_field
    
</a>
</h4>

<ul>
  <li> Value type is hash </li>
  <li> Default value is {} </li>
</ul>



<h4> 
  <a name="setting_add_tag">
    add_tag
    
</a>
</h4>

<ul>
  <li> Value type is array </li>
  <li> Default value is [] </li>
</ul>



<h4> 
  <a name="setting_charset">
    charset
    
</a>
</h4>

<ul>
  <li> Value can be any of: "ASCII-8BIT", "UTF-8", "US-ASCII", "Big5", "Big5-HKSCS", "Big5-UAO", "CP949", "Emacs-Mule", "EUC-JP", "EUC-KR", "EUC-TW", "GB18030", "GBK", "ISO-8859-1", "ISO-8859-2", "ISO-8859-3", "ISO-8859-4", "ISO-8859-5", "ISO-8859-6", "ISO-8859-7", "ISO-8859-8", "ISO-8859-9", "ISO-8859-10", "ISO-8859-11", "ISO-8859-13", "ISO-8859-14", "ISO-8859-15", "ISO-8859-16", "KOI8-R", "KOI8-U", "Shift_JIS", "UTF-16BE", "UTF-16LE", "UTF-32BE", "UTF-32LE", "Windows-1251", "BINARY", "IBM437", "CP437", "IBM737", "CP737", "IBM775", "CP775", "CP850", "IBM850", "IBM852", "CP852", "IBM855", "CP855", "IBM857", "CP857", "IBM860", "CP860", "IBM861", "CP861", "IBM862", "CP862", "IBM863", "CP863", "IBM864", "CP864", "IBM865", "CP865", "IBM866", "CP866", "IBM869", "CP869", "Windows-1258", "CP1258", "GB1988", "macCentEuro", "macCroatian", "macCyrillic", "macGreek", "macIceland", "macRoman", "macRomania", "macThai", "macTurkish", "macUkraine", "CP950", "Big5-HKSCS:2008", "CP951", "stateless-ISO-2022-JP", "eucJP", "eucJP-ms", "euc-jp-ms", "CP51932", "eucKR", "eucTW", "GB2312", "EUC-CN", "eucCN", "GB12345", "CP936", "ISO-2022-JP", "ISO2022-JP", "ISO-2022-JP-2", "ISO2022-JP2", "CP50220", "CP50221", "ISO8859-1", "Windows-1252", "CP1252", "ISO8859-2", "Windows-1250", "CP1250", "ISO8859-3", "ISO8859-4", "ISO8859-5", "ISO8859-6", "Windows-1256", "CP1256", "ISO8859-7", "Windows-1253", "CP1253", "ISO8859-8", "Windows-1255", "CP1255", "ISO8859-9", "Windows-1254", "CP1254", "ISO8859-10", "ISO8859-11", "TIS-620", "Windows-874", "CP874", "ISO8859-13", "Windows-1257", "CP1257", "ISO8859-14", "ISO8859-15", "ISO8859-16", "CP878", "Windows-31J", "CP932", "csWindows31J", "SJIS", "PCK", "MacJapanese", "MacJapan", "ASCII", "ANSI_X3.4-1968", "646", "UTF-7", "CP65000", "CP65001", "UTF8-MAC", "UTF-8-MAC", "UTF-8-HFS", "UTF-16", "UTF-32", "UCS-2BE", "UCS-4BE", "UCS-4LE", "CP1251", "UTF8-DoCoMo", "SJIS-DoCoMo", "UTF8-KDDI", "SJIS-KDDI", "ISO-2022-JP-KDDI", "stateless-ISO-2022-JP-KDDI", "UTF8-SoftBank", "SJIS-SoftBank", "locale", "external", "filesystem", "internal" </li>
  <li> Default value is "UTF-8" </li>
</ul>



<h4> 
  <a name="setting_debug">
    debug
    
</a>
</h4>

<ul>
  <li> Value type is boolean </li>
  <li> Default value is false </li>
</ul>



<h4> 
  <a name="setting_dimensions">
    dimensions
    
</a>
</h4>

<ul>
  <li> Value type is hash </li>
  <li> There is no default value for this setting. </li>
</ul>

<p>The default dimensions [ name, value, ... ] to use for events which do not have a "CW_dimensions" field</p>

<h4> 
  <a name="setting_exclude_tags">
    exclude_tags
    
</a>
</h4>

<ul>
  <li> Value type is array </li>
  <li> Default value is [] </li>
</ul>

<p>Only handle events without any of these tags. Note this check is additional to type and tags.</p>

<h4> 
  <a name="setting_field_dimensions">
    field_dimensions
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "CW_dimensions" </li>
</ul>

<p>The name of the field used to set the dimensions on an event metric
this field named here, if present in an event, must have an array of
one or more key &amp; value pairs, for example...</p>

<pre><code>add_field =&gt; [ "CW_dimensions", "Environment", "CW_dimensions", "prod" ]
</code></pre>

<p>or, equivalently...</p>

<pre><code>add_field =&gt; [ "CW_dimensions", "Environment" ]
add_field =&gt; [ "CW_dimensions", "prod" ]
</code></pre>

<h4> 
  <a name="setting_field_metricname">
    field_metricname
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "CW_metricname" </li>
</ul>

<p>The name of the field used to set the metric name on an event</p>

<h4> 
  <a name="setting_field_namespace">
    field_namespace
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "CW_namespace" </li>
</ul>

<p>The name of the field used to set a different namespace per event</p>

<h4> 
  <a name="setting_field_unit">
    field_unit
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "CW_unit" </li>
</ul>

<p>The name of the field used to set the unit on an event metric</p>

<h4> 
  <a name="setting_field_value">
    field_value
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "CW_value" </li>
</ul>

<p>The name of the field used to set the value (float) on an event metric</p>

<h4> 
  <a name="setting_fields">
    fields
    
</a>
</h4>

<ul>
  <li> Value type is array </li>
  <li> Default value is [] </li>
</ul>

<p>Only handle events with all of these fields.
Optional.</p>

<h4> 
  <a name="setting_format">
    format
    
</a>
</h4>

<ul>
  <li> Value can be any of: "plain", "json", "json_event" </li>
  <li> There is no default value for this setting. </li>
</ul>



<h4> 
  <a name="setting_message_format">
    message_format
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> There is no default value for this setting. </li>
</ul>



<h4> 
  <a name="setting_metricname">
    metricname
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> There is no default value for this setting. </li>
</ul>

<p>The default metric name to use for events which do not have a "CW_metricname" field.
If this is provided then all events which pass through this output will be aggregated and
sent to CloudWatch, so use this carefully.  Furthermore, when providing this option, you
will probably want to also restrict events from passing through this output using event
type, tag, and field matching</p>

<p>At a minimum events must have a "metric name" to be sent to CloudWatch. This can be achieved
either by providing a default here, as described above, OR by adding a "CW<em>metricname" field
to the events themselves, as described below.  By default, if no other configuration is
provided besides a metric name, then events will be counted (Unit: Count, Value: 1)
by their metric name (either this default or from their CW</em>metricname field)</p>

<h4> 
  <a name="setting_namespace">
    namespace
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "Logstash" </li>
</ul>

<p>The default namespace to use for events which do not have a "CW_namespace" field</p>

<h4> 
  <a name="setting_queue_size">
    queue_size
    
</a>
</h4>

<ul>
  <li> Value type is number </li>
  <li> Default value is 10000 </li>
</ul>

<p>How many events to queue before forcing a call to the CloudWatch API ahead of "timeframe" schedule
Set this to the number of events-per-timeframe you will be sending to CloudWatch to avoid extra API calls</p>

<h4> 
  <a name="setting_region">
    region
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "us-east-1" </li>
</ul>

<p>Constants
aggregate_key members
Units
The AWS Region to send logs to.</p>

<h4> 
  <a name="setting_remove_tag">
    remove_tag
    
</a>
</h4>

<ul>
  <li> Value type is array </li>
  <li> Default value is [] </li>
</ul>



<h4> 
  <a name="setting_secret_key">
    secret_key (required setting)
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> There is no default value for this setting. </li>
</ul>

<p>The AWS Secret Access Key</p>

<h4> 
  <a name="setting_tags">
    tags
    
</a>
</h4>

<ul>
  <li> Value type is array </li>
  <li> Default value is [] </li>
</ul>

<p>Only handle events with all of these tags.  Note that if you specify
a type, the event must also match that type.
Optional.</p>

<h4> 
  <a name="setting_timeframe">
    timeframe
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "1m" </li>
</ul>

<p>How often to send data to CloudWatch
This does not affect the event timestamps, events will always have their
actual timestamp (to-the-minute) sent to CloudWatch.</p>

<p>Increasing this may reduce the number of CloudWatch API calls, which would
reduce costs in heavy usage.</p>

<p>See here for allowed values: https://github.com/jmettraux/rufus-scheduler#the-time-strings-understood-by-rufus-scheduler</p>

<h4> 
  <a name="setting_type">
    type (required setting)
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "" </li>
</ul>

<p>The type to act on. If a type is given, then this output will only
act on messages with the same type. See any input plugin's "type"
attribute for more.
Optional.</p>

<h4> 
  <a name="setting_unit">
    unit
    
</a>
</h4>

<ul>
  <li> Value can be any of: "Seconds", "Microseconds", "Milliseconds", "Bytes", "Kilobytes", "Megabytes", "Gigabytes", "Terabytes", "Bits", "Kilobits", "Megabits", "Gigabits", "Terabits", "Percent", "Count", "Bytes/Second", "Kilobytes/Second", "Megabytes/Second", "Gigabytes/Second", "Terabytes/Second", "Bits/Second", "Kilobits/Second", "Megabits/Second", "Gigabits/Second", "Terabits/Second", "Count/Second", "None" </li>
  <li> Default value is "Count" </li>
</ul>

<p>The default unit to use for events which do not have a "CW_unit" field</p>

<h4> 
  <a name="setting_value">
    value
    
</a>
</h4>

<ul>
  <li> Value type is string </li>
  <li> Default value is "1" </li>
</ul>

<p>The default value to use for events which do not have a "CW_value" field
If provided, this must be a string which can be converted to a float, for example...
"1", "2.34", ".5", and "0.67"</p>


<hr>

This is documentation from <a href="https://github.com/logstash/logstash/blob/v1.1.6.dev/lib/logstash/outputs/cloudwatch.rb">lib/logstash/outputs/cloudwatch.rb</a>
